import { MCPTool } from "mcp-framework";
import { mysqlManager } from "../utils/MySQLManager.js";
class ShowTablesTool extends MCPTool {
    name = "show_tables";
    description = "List all tables in the current database";
    schema = {};
    async execute(input) {
        try {
            const results = await mysqlManager.executeQuery('SHOW TABLES');
            if (!results || results.length === 0) {
                return {
                    tables: [],
                    message: "No tables found in the database",
                };
            }
            // Extract table names from results
            const tables = results.map((row) => {
                const key = Object.keys(row)[0];
                return row[key];
            });
            return {
                tables,
                count: tables.length,
                message: `Found ${tables.length} table(s)`,
            };
        }
        catch (error) {
            throw new Error(`Failed to list tables: ${error}`);
        }
    }
}
export default ShowTablesTool;
