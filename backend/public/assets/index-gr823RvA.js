var We=Object.defineProperty;var Ke=(n,s,t)=>s in n?We(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var te=(n,s,t)=>Ke(n,typeof s!="symbol"?s+"":s,t);import{j as e,C as $,S as G,R as D,a as k,B as E,b as M,F as u,I as K,A as pe,c as B,d as De,M as R,e as Xe,N as ae,f as W,g as Le}from"./ui-DdDsML3D.js";import{b as Ye,r as d,R as Qe}from"./vendor-De_olRNh.js";import{c as Oe}from"./utils-B-dksMZM.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();var me={},Ee=Ye;me.createRoot=Ee.createRoot,me.hydrateRoot=Ee.hydrateRoot;const es="/api",ss=1e4,ne=[{id:1,name:"Super Admin",email:"admin@litigation.com",role:"super_admin",status:"active",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",last_login_at:"2025-09-16T12:00:00Z"},{id:2,name:"ناجي رمضان",email:"lawyer@litigation.com",role:"lawyer",status:"active",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",last_login_at:"2025-09-16T11:30:00Z"},{id:3,name:"Staff User",email:"staff@litigation.com",role:"staff",status:"active",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z"}];class ts{constructor(s=es,t=ss){te(this,"baseUrl");te(this,"timeout");te(this,"token",null);this.baseUrl=s,this.timeout=t,this.loadToken()}loadToken(){typeof window<"u"&&(this.token=localStorage.getItem("auth_token"))}setToken(s){this.token=s,typeof window<"u"&&(s?localStorage.setItem("auth_token",s):localStorage.removeItem("auth_token"))}getToken(){return this.token}refreshToken(){this.loadToken()}hasFileFields(s){if(!s||typeof s!="object")return!1;for(const t in s)if(s[t]instanceof File)return!0;return!1}createFormData(s){const t=new FormData;for(const c in s)s[c]instanceof File?t.append(c,s[c]):s[c]!==null&&s[c]!==void 0&&t.append(c,String(s[c]));return t}async request(s,t={}){this.refreshToken();const c=`${this.baseUrl}${s}`,l={};t.body instanceof FormData||(l["Content-Type"]="application/json"),this.token?(l.Authorization=`Bearer ${this.token}`,console.log("API request with token:",c,"Token:",this.token.substring(0,20)+"...")):console.warn("No authentication token available for request:",c);const r={...t,headers:{...l,...t.headers}};try{const g=new AbortController,a=setTimeout(()=>g.abort(),this.timeout),f=await fetch(c,{...r,signal:g.signal});clearTimeout(a);const m=f.headers.get("content-type");if(m&&!m.includes("application/json")){const h=await f.text();throw console.error("API request failed: Non-JSON response",{url:c,status:f.status,contentType:m,response:h.substring(0,200)}),new Error(`API request failed: Expected JSON but got ${m}`)}if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);return await f.json()}catch(g){return console.error("API request failed:",g),s.includes("/options")?this.getMockResponse(s,t):{success:!1,error:g instanceof Error?g.message:"Network error"}}}getMockResponse(s,t){const c=t.method||"GET";switch(s){case"/health":return{success:!0,data:{status:"ok",timestamp:new Date().toISOString(),server:"Mock API",version:"1.0.0"}};case"/auth/login":if(c==="POST"){const l=JSON.parse(t.body||"{}"),r=ne.find(g=>g.email===l.email);return r&&l.password==="admin123"?(this.setToken("mock-token-123"),{success:!0,message:"Login successful",data:{user:r,token:"mock-token-123"}}):{success:!1,error:"Invalid credentials"}}break;case"/auth/me":return this.token?{success:!0,data:ne[0]}:{success:!1,error:"Not authenticated"};case"/users":if(c==="GET")return{success:!0,data:ne,pagination:{current_page:1,per_page:20,total:ne.length,total_pages:1,has_next:!1,has_prev:!1}};break;case"/clients":return{success:!0,data:{data:[],pagination:{current_page:1,per_page:20,total:0,total_pages:0,has_next:!1,has_prev:!1}}};case"/cases":return{success:!0,data:{data:[],pagination:{current_page:1,per_page:20,total:0,total_pages:0,has_next:!1,has_prev:!1}}};case"/hearings":return{success:!0,data:{data:[],pagination:{current_page:1,per_page:20,total:0,total_pages:0,has_next:!1,has_prev:!1}}};case"/reports/dashboard":return{success:!0,data:{total_clients:0,total_cases:0,total_hearings:0,total_invoices:0,recent_activities:[],upcoming_hearings:[],financial_summary:{total_revenue:0,pending_amount:0,paid_amount:0}}};case"/clients/options":return{success:!0,data:{status:{active:"نشط",inactive:"غير نشط",suspended:"معلق",terminated:"منتهي"},type:{individual:"فرد",company:"شركة",government:"حكومي",organization:"مؤسسة"},cash_pro_bono:{cash:"نقدي",probono:"مجاني",installment:"أقساط"}}};case"/cases/options":return{success:!0,data:{status:{active:"نشطة",closed:"مغلقة",suspended:"معلقة",appealed:"مستأنفة"},type:{civil:"مدنية",criminal:"جنائية",commercial:"تجارية",administrative:"إدارية",family:"أحوال شخصية"},priority:{high:"عالية",medium:"متوسطة",low:"منخفضة"}}};case"/hearings/options":return{success:!0,data:{status:{scheduled:"مجدولة",completed:"مكتملة",postponed:"مؤجلة",cancelled:"ملغاة"},type:{initial:"أولى",follow_up:"متابعة",final:"نهائية",appeal:"استئناف"},outcome:{for:"لصالح",against:"ضد",pending:"معلقة",settled:"تسوية"}}}}return{success:!1,error:"Endpoint not implemented"}}async login(s){console.log("API Service: Login attempt with credentials:",s);const t=await this.request("/auth/login",{method:"POST",body:JSON.stringify(s)});return console.log("API Service: Login response:",t),t}async logout(){return this.setToken(null),this.request("/auth/logout",{method:"POST"})}async getCurrentUser(){return this.request("/auth/me")}async getUsers(s=1,t=20,c={}){const l=new URLSearchParams({page:s.toString(),limit:t.toString(),...c});return this.request(`/users?${l}`)}async getUser(s){return this.request(`/users/${s}`)}async createUser(s){return this.request("/users",{method:"POST",body:JSON.stringify(s)})}async updateUser(s,t){return this.request(`/users/${s}`,{method:"PUT",body:JSON.stringify(t)})}async deleteUser(s){return this.request(`/users/${s}`,{method:"DELETE"})}async getDashboard(){return this.request("/reports/dashboard")}async healthCheck(){return this.request("/health")}async get(s){return this.request(s,{method:"GET"})}async post(s,t){if(t&&this.hasFileFields(t)){const l=this.createFormData(t);return this.request(s,{method:"POST",body:l,headers:{}})}else return this.request(s,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(s,t){if(t&&this.hasFileFields(t)){const l=this.createFormData(t);return this.request(s,{method:"PUT",body:l,headers:{}})}else return this.request(s,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(s,t){return this.request(s,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(s){return this.request(s,{method:"DELETE"})}}const T=new ts,Re=d.createContext(void 0),as=({children:n})=>{const[s,t]=d.useState(null),[c,l]=d.useState(!0),r=!!s;d.useEffect(()=>{(async()=>{try{if(T.getToken()){const p=await T.getCurrentUser();p.success&&p.data?t(p.data):T.setToken(null)}}catch(h){console.error("Auth check failed:",h),T.setToken(null)}finally{l(!1)}})()},[]);const m={user:s,isAuthenticated:r,isLoading:c,login:async(y,h)=>{try{console.log("AuthContext: Login attempt with:",{email:y,password:h}),l(!0);const p=await T.login({email:y,password:h});return console.log("AuthContext: Login response:",p),p.success&&p.data?(console.log("AuthContext: Login successful, setting user and token"),t(p.data.user),T.setToken(p.data.token),!0):(console.error("AuthContext: Login failed:",p.error),!1)}catch(p){return console.error("AuthContext: Login error:",p),!1}finally{l(!1)}},logout:()=>{t(null),T.setToken(null),T.logout().catch(console.error)},refreshUser:async()=>{try{const y=await T.getCurrentUser();y.success&&y.data&&t(y.data)}catch(y){console.error("Failed to refresh user:",y)}}};return e.jsx(Re.Provider,{value:m,children:n})},je=()=>{const n=d.useContext(Re);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},ns=({size:n="md",showText:s=!0,variant:t="primary",type:c="full",language:l="both"})=>{const r={sm:{width:40,height:40,fontSize:"0.875rem",logoHeight:30},md:{width:60,height:60,fontSize:"1rem",logoHeight:45},lg:{width:80,height:80,fontSize:"1.25rem",logoHeight:60}},g={primary:{bg:"#2c5530",color:"#ffd700",border:"#ffd700"},white:{bg:"#ffffff",color:"#2c5530",border:"#2c5530"},dark:{bg:"#2c5530",color:"#ffffff",border:"#ffffff"}},a=r[n],f=g[t],y=c==="emblem"?"/assets/logos/emblem_green_gold.png":c==="stamp"?"/assets/logos/stamp_green_gold.png":l==="en"?"/assets/logos/english_green_gold_logo.png":"/assets/logos/arabic_green_gold_logo.png";return c==="full"?e.jsx("div",{className:"d-flex align-items-center justify-content-center",children:e.jsx("img",{src:y,alt:"سري الدين وشركاه - للاستشارات القانونية - Sarieldin and Partners - Legal Advisors",style:{height:a.logoHeight,width:"auto"},className:"img-fluid"})}):e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("div",{className:"me-2",children:e.jsx("img",{src:y,alt:"شعار سري الدين وشركاه - Sarieldin and Partners Logo",width:a.width,height:a.height,className:"img-fluid"})}),s&&e.jsxs("div",{className:"text-start",children:[e.jsx("div",{className:"fw-bold mb-0",style:{color:f.color==="#ffffff"?f.color:f.bg,fontSize:a.fontSize,lineHeight:1.2},children:"سري الدين وشركاه"}),e.jsx("div",{className:"small text-muted",style:{fontSize:`calc(${a.fontSize} * 0.8)`},children:"للاستشارات القانونية"}),e.jsx("div",{className:"small text-muted",style:{fontSize:`calc(${a.fontSize} * 0.75)`,fontStyle:"italic"},children:"Sarieldin and Partners - Legal Advisors"})]})]})},rs=({variant:n="default",size:s="md"})=>{const[t,c]=d.useState("ar");d.useEffect(()=>{const g=document.documentElement.dir;c(g==="rtl"?"ar":"en")},[]);const l=g=>{c(g),document.documentElement.dir=g==="ar"?"rtl":"ltr",document.documentElement.lang=g==="ar"?"ar":"en",localStorage.setItem("preferred-language",g),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:g}}))};if(n==="minimal")return e.jsxs("div",{className:"language-switcher d-flex align-items-center gap-1","data-testid":"language-switcher",role:"group","aria-label":"Language selector",children:[e.jsx("button",{type:"button",className:`btn btn-sm ${t==="ar"?"btn-primary":"btn-outline-primary"}`,onClick:()=>l("ar"),"data-lang":"ar","aria-pressed":t==="ar",title:"العربية",children:"ع"}),e.jsx("button",{type:"button",className:`btn btn-sm ${t==="en"?"btn-primary":"btn-outline-primary"}`,onClick:()=>l("en"),"data-lang":"en","aria-pressed":t==="en",title:"English",children:"En"})]});const r=s==="sm"?"btn-sm":"";return e.jsxs("div",{className:"language-switcher dropdown","data-testid":"language-switcher",children:[e.jsxs("button",{className:`btn btn-outline-secondary dropdown-toggle ${r}`,type:"button",id:"languageDropdown","data-bs-toggle":"dropdown","aria-expanded":"false","aria-label":"Select language",children:[e.jsx("span",{className:"me-2",children:t==="ar"?"🇸🇦":"🇺🇸"}),t==="ar"?"العربية":"English"]}),e.jsxs("ul",{className:"dropdown-menu","aria-labelledby":"languageDropdown",children:[e.jsx("li",{children:e.jsxs("button",{className:`dropdown-item d-flex align-items-center ${t==="ar"?"active":""}`,type:"button",onClick:()=>l("ar"),"data-lang":"ar",children:[e.jsx("span",{className:"me-2",children:"🇸🇦"}),"العربية",t==="ar"&&e.jsx("i",{className:"bi bi-check-lg ms-auto text-primary"})]})}),e.jsx("li",{children:e.jsxs("button",{className:`dropdown-item d-flex align-items-center ${t==="en"?"active":""}`,type:"button",onClick:()=>l("en"),"data-lang":"en",children:[e.jsx("span",{className:"me-2",children:"🇺🇸"}),"English",t==="en"&&e.jsx("i",{className:"bi bi-check-lg ms-auto text-primary"})]})})]})]})},Fe=({id:n,type:s,label:t,value:c,onChange:l,required:r=!1,placeholder:g="",dir:a="auto",error:f,className:m="",autoComplete:y})=>{const h=`form-control ${f?"is-invalid":""} ${m}`;return e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:n,className:"form-label",children:[t,r&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsx("input",{type:s,className:h,id:n,value:c,onChange:l,required:r,placeholder:g,dir:a,autoComplete:y,"aria-invalid":f?"true":"false","aria-describedby":f?`${n}-error`:void 0}),f&&e.jsx("div",{id:`${n}-error`,className:"invalid-feedback error",role:"alert","aria-live":"polite",children:f})]})},is=()=>{const[n,s]=d.useState(""),[t,c]=d.useState(""),[l,r]=d.useState(""),[g,a]=d.useState({}),[f,m]=d.useState(!1),{login:y}=je(),h=()=>{const w={};return n?/\S+@\S+\.\S+/.test(n)||(w.email="البريد الإلكتروني غير صحيح / Invalid email format"):w.email="البريد الإلكتروني مطلوب / Email is required",t?t.length<3&&(w.password="كلمة المرور قصيرة جداً / Password too short"):w.password="كلمة المرور مطلوبة / Password is required",w},p=async w=>{console.log("LoginForm: handleSubmit called"),w.preventDefault(),r("");const z=h();if(a(z),Object.keys(z).length>0){console.log("LoginForm: Validation errors found:",z),setTimeout(()=>{const b=document.querySelector(".is-invalid");b&&b.focus()},100);return}console.log("LoginForm: Starting login process"),m(!0);try{const b=await y(n,t);console.log("LoginForm: Login result:",b),b||r("بيانات غير صحيحة / Invalid email or password")}catch(b){console.error("LoginForm: Login error:",b),r("فشل تسجيل الدخول. حاول مرة أخرى / Login failed. Please try again.")}finally{m(!1)}};return e.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center bg-light",children:e.jsx("div",{className:"card shadow-lg",style:{width:"450px"},children:e.jsxs("div",{className:"card-body p-5",children:[e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsx(rs,{variant:"minimal",size:"sm"})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(ns,{size:"lg",showText:!1,variant:"primary",type:"full",language:"ar"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h2",{className:"card-title text-primary mb-2",children:"نظام إدارة التقاضي"}),e.jsx("p",{className:"text-muted",children:"Litigation Management System"})]})]}),e.jsxs("form",{onSubmit:p,"data-testid":"login-form",children:[l&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:l}),e.jsx(Fe,{id:"email",type:"email",label:"البريد الإلكتروني / Email",value:n,onChange:w=>s(w.target.value),required:!1,placeholder:"admin@litigation.com",dir:"ltr",error:g.email,autoComplete:"username"}),e.jsx(Fe,{id:"password",type:"password",label:"كلمة المرور / Password",value:t,onChange:w=>c(w.target.value),required:!1,placeholder:"admin123",dir:"ltr",error:g.password,autoComplete:"current-password"}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"جاري تسجيل الدخول..."]}):"تسجيل الدخول / Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("strong",{children:"Test Accounts:"}),e.jsx("br",{}),"Admin: admin@litigation.com / admin123",e.jsx("br",{}),"Lawyer: lawyer@litigation.com / admin123",e.jsx("br",{}),"Staff: staff@litigation.com / admin123"]})})]})})})},ls=()=>{var g,a,f;const[n,s]=d.useState(null),[t,c]=d.useState(!0),[l,r]=d.useState(null);return d.useEffect(()=>{(async()=>{try{c(!0);const y=await T.healthCheck();s(y),r(null)}catch{r("Failed to connect to API"),s(null)}finally{c(!1)}})()},[]),t?e.jsx("div",{className:"alert alert-info",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),"جاري فحص حالة النظام..."]})}):l?e.jsxs("div",{className:"alert alert-warning",children:[e.jsxs("h6",{children:["تحذير: ",l]}),e.jsx("p",{className:"mb-0",children:"النظام يعمل في وضع البيانات الوهمية (Mock Data Mode)"})]}):e.jsxs("div",{className:"alert alert-success",children:[e.jsx("h6",{children:"✅ النظام يعمل بشكل طبيعي"}),e.jsxs("p",{className:"mb-0",children:["الخادم: ",((g=n==null?void 0:n.data)==null?void 0:g.server)||"Mock API",e.jsx("br",{}),"الإصدار: ",((a=n==null?void 0:n.data)==null?void 0:a.version)||"1.0.0",e.jsx("br",{}),"الوقت: ",((f=n==null?void 0:n.data)==null?void 0:f.timestamp)||new Date().toLocaleString("ar-SA")]})]})},cs=()=>{const{user:n,logout:s}=je();return e.jsxs("div",{className:"container-fluid",children:[e.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("a",{className:"navbar-brand",href:"#",children:"نظام إدارة التقاضي"}),e.jsx("div",{className:"navbar-nav ms-auto",children:e.jsxs("div",{className:"nav-item dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:(n==null?void 0:n.name)||"User"}),e.jsx("ul",{className:"dropdown-menu",children:e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"#",onClick:s,children:"تسجيل الخروج"})})})]})})]})}),e.jsxs("div",{className:"container-fluid mt-4",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h1",{className:"h3 mb-4",children:"لوحة التحكم"}),e.jsx(ls,{})]})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 mb-4",children:e.jsx("div",{className:"card bg-primary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"card-title",children:"العملاء"}),e.jsx("h2",{className:"mb-0",children:"0"})]}),e.jsx("div",{className:"align-self-center",children:e.jsx("i",{className:"fas fa-users fa-2x"})})]})})})}),e.jsx("div",{className:"col-md-3 mb-4",children:e.jsx("div",{className:"card bg-success text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"card-title",children:"القضايا"}),e.jsx("h2",{className:"mb-0",children:"0"})]}),e.jsx("div",{className:"align-self-center",children:e.jsx("i",{className:"fas fa-gavel fa-2x"})})]})})})}),e.jsx("div",{className:"col-md-3 mb-4",children:e.jsx("div",{className:"card bg-warning text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"card-title",children:"الجلسات"}),e.jsx("h2",{className:"mb-0",children:"0"})]}),e.jsx("div",{className:"align-self-center",children:e.jsx("i",{className:"fas fa-calendar fa-2x"})})]})})})}),e.jsx("div",{className:"col-md-3 mb-4",children:e.jsx("div",{className:"card bg-info text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"card-title",children:"الفواتير"}),e.jsx("h2",{className:"mb-0",children:"0"})]}),e.jsx("div",{className:"align-self-center",children:e.jsx("i",{className:"fas fa-file-invoice fa-2x"})})]})})})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"مرحباً بك في نظام إدارة التقاضي"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{className:"card-text",children:["مرحباً ",e.jsx("strong",{children:n==null?void 0:n.name}),"،"]}),e.jsx("p",{className:"card-text",children:"تم تسجيل دخولك بنجاح إلى نظام إدارة التقاضي. يمكنك الآن إدارة العملاء والقضايا والجلسات والفواتير من خلال هذا النظام."}),e.jsx("p",{className:"card-text",children:e.jsxs("small",{className:"text-muted",children:["دورك الحالي: ",e.jsx("strong",{children:n==null?void 0:n.role})]})})]})]})})})]})]})};function os(){if(console&&console.warn){for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];typeof s[0]=="string"&&(s[0]=`react-i18next:: ${s[0]}`),console.warn(...s)}}const ze={};function xe(){for(var n=arguments.length,s=new Array(n),t=0;t<n;t++)s[t]=arguments[t];typeof s[0]=="string"&&ze[s[0]]||(typeof s[0]=="string"&&(ze[s[0]]=new Date),os(...s))}const Ue=(n,s)=>()=>{if(n.isInitialized)s();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),s()};n.on("initialized",t)}};function Ae(n,s,t){n.loadNamespaces(s,Ue(n,t))}function Te(n,s,t,c){typeof t=="string"&&(t=[t]),t.forEach(l=>{n.options.ns.indexOf(l)<0&&n.options.ns.push(l)}),n.loadLanguages(s,Ue(n,c))}function ds(n,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=s.languages[0],l=s.options?s.options.fallbackLng:!1,r=s.languages[s.languages.length-1];if(c.toLowerCase()==="cimode")return!0;const g=(a,f)=>{const m=s.services.backendConnector.state[`${a}|${f}`];return m===-1||m===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!g(s.isLanguageChangingTo,n)?!1:!!(s.hasResourceBundle(c,n)||!s.services.backendConnector.backend||s.options.resources&&!s.options.partialBundledLanguages||g(c,n)&&(!l||g(r,n)))}function hs(n,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!s.languages||!s.languages.length?(xe("i18n.languages were undefined or empty",s.languages),!0):s.options.ignoreJSONStructure!==void 0?s.hasLoadedNamespace(n,{lng:t.lng,precheck:(l,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&l.services.backendConnector.backend&&l.isLanguageChangingTo&&!r(l.isLanguageChangingTo,n))return!1}}):ds(n,s,t)}const us=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ms={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},xs=n=>ms[n],gs=n=>n.replace(us,xs);let ps={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:gs};function js(){return ps}let fs;function ys(){return fs}const bs=d.createContext();class vs{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ns=(n,s)=>{const t=d.useRef();return d.useEffect(()=>{t.current=n},[n,s]),t.current};function Z(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=s,{i18n:c,defaultNS:l}=d.useContext(bs)||{},r=t||c||ys();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new vs),!r){xe("You will need to pass in an i18next instance by using initReactI18next");const C=(i,v)=>typeof v=="string"?v:v&&typeof v=="object"&&typeof v.defaultValue=="string"?v.defaultValue:Array.isArray(i)?i[i.length-1]:i,x=[C,{},!1];return x.t=C,x.i18n={},x.ready=!1,x}r.options.react&&r.options.react.wait!==void 0&&xe("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const g={...js(),...r.options.react,...s},{useSuspense:a,keyPrefix:f}=g;let m=l||r.options&&r.options.defaultNS;m=typeof m=="string"?[m]:m||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(m);const y=(r.isInitialized||r.initializedStoreOnce)&&m.every(C=>hs(C,r,g));function h(){return r.getFixedT(s.lng||null,g.nsMode==="fallback"?m:m[0],f)}const[p,w]=d.useState(h);let z=m.join();s.lng&&(z=`${s.lng}${z}`);const b=Ns(z),L=d.useRef(!0);d.useEffect(()=>{const{bindI18n:C,bindI18nStore:x}=g;L.current=!0,!y&&!a&&(s.lng?Te(r,s.lng,m,()=>{L.current&&w(h)}):Ae(r,m,()=>{L.current&&w(h)})),y&&b&&b!==z&&L.current&&w(h);function i(){L.current&&w(h)}return C&&r&&r.on(C,i),x&&r&&r.store.on(x,i),()=>{L.current=!1,C&&r&&C.split(" ").forEach(v=>r.off(v,i)),x&&r&&x.split(" ").forEach(v=>r.store.off(v,i))}},[r,z]);const F=d.useRef(!0);d.useEffect(()=>{L.current&&!F.current&&w(h),F.current=!1},[r,f]);const N=[p,r,y];if(N.t=p,N.i18n=r,N.ready=y,y||!y&&!a)return N;throw new Promise(C=>{s.lng?Te(r,s.lng,m,()=>C()):Ae(r,m,()=>C())})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),A=(n,s)=>{const t=d.forwardRef(({color:c="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:g,className:a="",children:f,...m},y)=>d.createElement("svg",{ref:y,..._s,width:l,height:l,stroke:c,strokeWidth:g?Number(r)*24/Number(l):r,className:["lucide",`lucide-${ws(n)}`,a].join(" "),...m},[...s.map(([h,p])=>d.createElement(h,p)),...Array.isArray(f)?f:[f]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=A("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=A("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=A("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=A("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=A("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=A("Gavel",[["path",{d:"m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10",key:"c9cbz0"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=A("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=A("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=A("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=A("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=A("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=A("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=A("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=A("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=A("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=A("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=A("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=A("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=A("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ps=()=>{const{t:n}=Z(),[s,t]=d.useState([]),[c,l]=d.useState(!0),[r,g]=d.useState(null),[a,f]=d.useState({status:"",category:"",search:""}),[m,y]=d.useState({status:{},category:{},importance:{}}),[h,p]=d.useState({current_page:1,per_page:10,total:0,total_pages:0,has_next:!1,has_prev:!1});d.useEffect(()=>{w(),z()},[a,h.current_page]);const w=async()=>{try{l(!0),g(null);const x=new URLSearchParams({page:h.current_page.toString(),limit:h.per_page.toString(),...Object.fromEntries(Object.entries(a).filter(([v,S])=>S))}),i=await T.get(`/cases?${x}`);i.success?(t(i.data.data),p(i.data.pagination)):g("Failed to load cases")}catch(x){g("Error loading cases"),console.error("Error loading cases:",x)}finally{l(!1)}},z=async()=>{try{const x=await T.get("/cases/options");x.success&&y(x.data)}catch(x){console.error("Error loading options:",x)}},b=(x,i)=>{f(v=>({...v,[x]:i})),p(v=>({...v,current_page:1}))},L=x=>{p(i=>({...i,current_page:x}))},F=x=>{const i={active:"success",pending:"warning",completed:"primary",cancelled:"danger",on_hold:"secondary",appealed:"info"};return e.jsx(B,{bg:i[x]||"secondary",children:m.status[x]||x})},N=x=>{const i={low:"success",medium:"warning",high:"danger",critical:"dark"};return e.jsx(B,{bg:i[x]||"secondary",children:m.importance[x]||x})},C=x=>new Date(x).toLocaleDateString("ar-SA");return c&&s.length===0?e.jsx($,{className:"py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2",children:"Loading cases..."})]})}):e.jsxs($,{fluid:!0,className:"py-4",children:[e.jsx(D,{className:"mb-4",children:e.jsx(k,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-1",children:[e.jsx(X,{className:"me-2"}),"إدارة القضايا"]}),e.jsx("p",{className:"text-muted mb-0",children:"إدارة وتتبع جميع القضايا القانونية"})]}),e.jsxs(E,{variant:"primary",size:"lg",children:[e.jsx(ve,{className:"me-2"}),"إضافة قضية جديدة"]})]})})}),e.jsx(M,{className:"mb-4",children:e.jsx(M.Body,{children:e.jsxs(D,{children:[e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"البحث"}),e.jsxs(K,{children:[e.jsx(K.Text,{children:e.jsx(Ne,{size:16})}),e.jsx(u.Control,{type:"text",placeholder:"البحث في القضايا...",value:a.search,onChange:x=>b("search",x.target.value)})]})]})}),e.jsx(k,{md:3,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"الحالة"}),e.jsxs(u.Select,{value:a.status,onChange:x=>b("status",x.target.value),children:[e.jsx("option",{value:"",children:"جميع الحالات"}),Object.entries(m.status).map(([x,i])=>e.jsx("option",{value:x,children:i},x))]})]})}),e.jsx(k,{md:3,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"التصنيف"}),e.jsxs(u.Select,{value:a.category,onChange:x=>b("category",x.target.value),children:[e.jsx("option",{value:"",children:"جميع التصنيفات"}),Object.entries(m.category).map(([x,i])=>e.jsx("option",{value:x,children:i},x))]})]})}),e.jsx(k,{md:2,className:"d-flex align-items-end",children:e.jsxs(E,{variant:"outline-secondary",onClick:w,children:[e.jsx(ye,{className:"me-1"}),"تطبيق"]})})]})})}),r&&e.jsx(pe,{variant:"danger",className:"mb-4",children:r}),e.jsxs(M,{children:[e.jsx(M.Header,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"قائمة القضايا"}),e.jsxs("div",{className:"text-muted",children:["إجمالي: ",h.total," قضية"]})]})}),e.jsx(M.Body,{className:"p-0",children:c?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2",children:"جاري التحميل..."})]}):s.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(X,{size:48,className:"text-muted mb-3"}),e.jsx("h5",{children:"لا توجد قضايا"}),e.jsx("p",{className:"text-muted",children:"لم يتم العثور على قضايا تطابق المعايير المحددة"})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"رقم القضية"}),e.jsx("th",{children:"الموضوع"}),e.jsx("th",{children:"العميل"}),e.jsx("th",{children:"الحالة"}),e.jsx("th",{children:"الأهمية"}),e.jsx("th",{children:"المحكمة"}),e.jsx("th",{children:"تاريخ البداية"}),e.jsx("th",{children:"الإجراءات"})]})}),e.jsx("tbody",{children:s.map(x=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:x.matter_id})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:x.matter_ar}),x.matter_en&&e.jsx("small",{className:"text-muted",children:x.matter_en})]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{children:x.client_name_ar}),x.client_name_en&&e.jsx("small",{className:"text-muted",children:x.client_name_en})]})}),e.jsx("td",{children:F(x.matter_status)}),e.jsx("td",{children:N(x.matter_importance)}),e.jsx("td",{children:x.matter_court||"-"}),e.jsx("td",{children:C(x.matter_start_date)}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(E,{variant:"outline-primary",size:"sm",children:e.jsx(fe,{size:14})}),e.jsx(E,{variant:"outline-secondary",size:"sm",children:e.jsx(be,{size:14})}),e.jsx(E,{variant:"outline-danger",size:"sm",children:e.jsx(le,{size:14})})]})})]},x.id))})]})})}),h.total_pages>1&&e.jsx(M.Footer,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted",children:["عرض ",(h.current_page-1)*h.per_page+1," إلى"," ",Math.min(h.current_page*h.per_page,h.total)," من"," ",h.total," قضية"]}),e.jsxs("div",{className:"btn-group",children:[e.jsx(E,{variant:"outline-secondary",size:"sm",disabled:!h.has_prev,onClick:()=>L(h.current_page-1),children:"السابق"}),Array.from({length:h.total_pages},(x,i)=>i+1).map(x=>e.jsx(E,{variant:x===h.current_page?"primary":"outline-secondary",size:"sm",onClick:()=>L(x),children:x},x)),e.jsx(E,{variant:"outline-secondary",size:"sm",disabled:!h.has_next,onClick:()=>L(h.current_page+1),children:"التالي"})]})]})})]})]})};function oe(){const{i18n:n}=Z(),[s,t]=d.useState(localStorage.getItem("language")||"ar"),c=d.useCallback(a=>{t(a),localStorage.setItem("language",a),n&&typeof n.changeLanguage=="function"&&n.changeLanguage(a),document.documentElement.lang=a,window.dispatchEvent(new CustomEvent("languageChange",{detail:{language:a}}))},[n]),l=d.useCallback(()=>{c(s==="ar"?"en":"ar")},[s,c]),r=s==="ar",g=s==="en";return d.useEffect(()=>{n&&typeof n.changeLanguage=="function"&&n.language!==s&&n.changeLanguage(s)},[n,s]),d.useEffect(()=>{const a=f=>{const{language:m}=f.detail;m!==s&&t(m)};return window.addEventListener("languageChange",a),()=>{window.removeEventListener("languageChange",a)}},[s]),{currentLanguage:s,setLanguage:c,toggleLanguage:l,isArabic:r,isEnglish:g}}function _e(){const[n,s]=d.useState(document.documentElement.dir||"rtl"),t=d.useCallback(r=>{s(r),document.documentElement.dir=r,document.documentElement.style.setProperty("--direction",r),window.dispatchEvent(new CustomEvent("directionChange",{detail:{direction:r}}))},[]),c=d.useCallback(()=>{t(n==="rtl"?"ltr":"rtl")},[n,t]),l=n==="rtl";return d.useEffect(()=>{const r=g=>{const{direction:a}=g.detail;a!==n&&s(a)};return window.addEventListener("directionChange",r),()=>{window.removeEventListener("directionChange",r)}},[n]),{direction:n,setDirection:t,isRTL:l,toggleDirection:c}}function ge(n){if(!n||n.length===0)return"auto";const s=n.charAt(0),t=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,c=/[\u0590-\u05FF\u200F\u202B\u202D\u202E\u202C\u202A\u2028\u2029]/;return t.test(s)||c.test(s)?"rtl":/[a-zA-Z0-9]/.test(s)?"ltr":"auto"}function $e(n){if(!n||n.length===0)return!1;const s=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,t=/[a-zA-Z0-9]/,c=s.test(n),l=t.test(n);return c&&l}function Ms(n,s){return["email","url","tel","password"].includes(n)?"ltr":"auto"}function Ie({value:n,onChange:s,type:t="text",placeholder:c,className:l,disabled:r=!1,required:g=!1,maxLength:a,"aria-label":f,"aria-describedby":m,isInvalid:y=!1,dir:h,id:p}){const{t:w}=Z();_e();const{currentLanguage:z}=oe(),[b,L]=d.useState("auto"),[F,N]=d.useState(!1),C=d.useRef(null);d.useEffect(()=>{const P=h||Ms(t);L(P);const O=$e(n);N(O),C.current&&(C.current.dir=P,O?C.current.setAttribute("data-mixed-content","true"):C.current.removeAttribute("data-mixed-content"))},[t,n,h]);const x=P=>{const O=P.target.value;if(s(O),O.length>0){const H=ge(O);L(H)}},i=()=>{C.current&&C.current.setAttribute("data-focused","true")},v=()=>{C.current&&C.current.removeAttribute("data-focused")},S=()=>c||(t==="email"?"example@domain.com":t==="tel"?z==="ar"?"+966501234567":"+1234567890":z==="ar"?"أدخل النص هنا...":"Enter text here...");return e.jsx(De,{ref:C,id:p,type:t,value:n,onChange:x,onFocus:i,onBlur:v,placeholder:S(),className:Oe("mixed-content-input",F&&"mixed-content",l),disabled:r,required:g,maxLength:a,dir:b,"aria-label":f,"aria-describedby":m,"data-field-type":t,"data-language":z,"data-direction":b,isInvalid:y})}function re({value:n,onChange:s,placeholder:t,className:c,disabled:l=!1,required:r=!1,maxLength:g,rows:a=3,dir:f,"aria-label":m,"aria-describedby":y}){const{t:h}=Z();_e();const{currentLanguage:p}=oe(),[w,z]=d.useState("auto"),[b,L]=d.useState(!1),F=d.useRef(null);d.useEffect(()=>{const v=ge(n);z(v);const S=$e(n);L(S),F.current&&(F.current.dir=v,S?F.current.setAttribute("data-mixed-content","true"):F.current.removeAttribute("data-mixed-content"))},[n]);const N=v=>{const S=v.target.value;if(s(S),S.length>0){const P=ge(S);z(P)}},C=()=>{F.current&&F.current.setAttribute("data-focused","true")},x=()=>{F.current&&F.current.removeAttribute("data-focused")},i=()=>t||(p==="ar"?"أدخل النص هنا...":"Enter text here...");return e.jsx(De,{ref:F,as:"textarea",value:n,onChange:N,onFocus:C,onBlur:x,placeholder:i(),className:Oe("mixed-content-textarea",b&&"mixed-content",c),disabled:l,required:r,maxLength:g,rows:a,dir:w,"aria-label":m,"aria-describedby":y,"data-language":p,"data-direction":w})}const ue={client_name_ar:"",client_name_en:"",client_type:"individual",cash_pro_bono:"cash",status:"active",contact_lawyer:"",phone:"",email:"",address_ar:"",address_en:"",notes_ar:"",notes_en:"",client_start_date:new Date().toISOString().split("T")[0],logo_file:void 0,logo_url:""},Is=({show:n,onHide:s,onSave:t,client:c,mode:l,loading:r=!1})=>{var Q;const{t:g}=Z(),{currentLanguage:a}=oe(),{isRTL:f}=_e(),[m,y]=d.useState(ue),[h,p]=d.useState({}),[w,z]=d.useState(!1),[b,L]=d.useState(null),F=d.useRef(null),N=l==="view",C=l==="edit",x=l==="create";d.useEffect(()=>{if(c&&(C||N)){const j={...ue,...c,client_name_ar:c.client_name_ar||"",client_name_en:c.client_name_en||"",contact_lawyer:c.contact_lawyer||"",phone:c.phone||"",email:c.email||"",address_ar:c.address_ar||"",address_en:c.address_en||"",notes_ar:c.notes_ar||"",notes_en:c.notes_en||"",client_start_date:c.client_start_date||new Date().toISOString().split("T")[0]};y(j),c.logo_url?L(c.logo_url):L(null)}else x&&(y(ue),L(null));p({})},[c,l,n]),d.useEffect(()=>()=>{b&&b.startsWith("blob:")&&URL.revokeObjectURL(b)},[b]);const i=()=>{var I,U;const j={};return(I=m.client_name_ar)!=null&&I.trim()||(j.client_name_ar=a==="ar"?"اسم العميل بالعربية مطلوب":"Arabic client name is required"),m.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)&&(j.email=a==="ar"?"البريد الإلكتروني غير صحيح":"Invalid email format"),m.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(m.phone)&&(j.phone=a==="ar"?"رقم الهاتف غير صحيح":"Invalid phone number"),(U=m.contact_lawyer)!=null&&U.trim()||(j.contact_lawyer=a==="ar"?"المحامي المسؤول مطلوب":"Contact lawyer is required"),p(j),Object.keys(j).length===0},v=async j=>{if(j.preventDefault(),N){s();return}if(i())try{z(!0),await t(m),s()}catch(I){console.error("Error saving client:",I)}finally{z(!1)}},S=(j,I)=>{y(U=>({...U,[j]:I})),h[j]&&p(U=>({...U,[j]:void 0}))},P=j=>{var ee;const I=(ee=j.target.files)==null?void 0:ee[0];if(!I)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(I.type)){p(q=>({...q,logo_file:a==="ar"?"يرجى اختيار ملف صورة صحيح (JPEG, PNG, GIF, WebP)":"Please select a valid image file (JPEG, PNG, GIF, WebP)"}));return}const de=5*1024*1024;if(I.size>de){p(q=>({...q,logo_file:a==="ar"?"حجم الملف يجب أن يكون أقل من 5 ميجابايت":"File size must be less than 5MB"}));return}p(q=>({...q,logo_file:void 0})),b&&b.startsWith("blob:")&&URL.revokeObjectURL(b),y(q=>({...q,logo_file:I}));const he=URL.createObjectURL(I);L(he)},O=()=>{b&&b.startsWith("blob:")&&URL.revokeObjectURL(b),y(j=>({...j,logo_file:void 0,logo_url:""})),L(null),F.current&&(F.current.value=""),p(j=>({...j,logo_file:void 0}))},H=()=>{var j;N||(j=F.current)==null||j.click()},Y=()=>({create:a==="ar"?"إضافة عميل جديد":"Add New Client",edit:a==="ar"?"تعديل العميل":"Edit Client",view:a==="ar"?"تفاصيل العميل":"Client Details"})[l],V=()=>w?a==="ar"?"جاري الحفظ...":"Saving...":N?a==="ar"?"إغلاق":"Close":a==="ar"?"حفظ":"Save";return e.jsxs(R,{show:n,onHide:s,size:"lg",centered:!0,dir:f?"rtl":"ltr",children:[e.jsx(R.Header,{closeButton:!0,className:"border-bottom",children:e.jsxs(R.Title,{className:"d-flex align-items-center",children:[m.client_type==="company"?e.jsx(qe,{className:"me-2",size:20}):e.jsx(Be,{className:"me-2",size:20}),Y()]})}),e.jsxs(u,{onSubmit:v,children:[e.jsxs(R.Body,{className:"p-4",children:[r&&e.jsxs("div",{className:"text-center py-3",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2 text-muted",children:a==="ar"?"جاري التحميل...":"Loading..."})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mb-4",children:e.jsx(k,{xs:12,children:e.jsx("h6",{className:"text-muted mb-3",children:a==="ar"?"المعلومات الأساسية":"Basic Information"})})}),e.jsxs(D,{className:"mb-4",children:[e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{children:[e.jsx(Ge,{size:16,className:"me-1"}),a==="ar"?"شعار العميل":"Client Logo",e.jsxs("small",{className:"text-muted ms-2",children:["(",a==="ar"?"اختياري - للشركات والتقارير":"Optional - for companies and reports",")"]})]}),e.jsxs("div",{className:"logo-upload-container border rounded p-3",style:{minHeight:"120px"},children:[b?e.jsxs("div",{className:"text-center position-relative",children:[e.jsx(Xe,{src:b,alt:"Client Logo Preview",style:{maxWidth:"200px",maxHeight:"100px",objectFit:"contain"},className:"border rounded"}),!N&&e.jsx(E,{variant:"outline-danger",size:"sm",className:"position-absolute top-0 end-0 mt-1 me-1",onClick:O,title:a==="ar"?"إزالة الشعار":"Remove Logo",children:e.jsx(zs,{size:14})}),e.jsx("div",{className:"mt-2",children:e.jsx("small",{className:"text-muted",children:((Q=m.logo_file)==null?void 0:Q.name)||(a==="ar"?"الشعار الحالي":"Current Logo")})})]}):e.jsxs("div",{className:`text-center py-4 ${N?"":"cursor-pointer"}`,onClick:H,style:{border:"2px dashed #dee2e6",borderRadius:"0.375rem",backgroundColor:"#f8f9fa"},children:[e.jsx(As,{size:32,className:"text-muted mb-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a==="ar"?"اضغط لرفع الشعار":"Click to upload logo"}),e.jsx("small",{className:"text-muted",children:a==="ar"?"PNG, JPG, GIF حتى 5 ميجابايت":"PNG, JPG, GIF up to 5MB"})]})]}),e.jsx("input",{ref:F,type:"file",accept:"image/*",onChange:P,style:{display:"none"},disabled:N})]}),h.logo_file&&e.jsx(u.Control.Feedback,{type:"invalid",className:"d-block",children:h.logo_file})]})}),e.jsx(k,{md:6,children:e.jsxs("div",{className:"text-muted small mt-4",children:[e.jsx("h6",{className:"small",children:a==="ar"?"إرشادات الشعار:":"Logo Guidelines:"}),e.jsxs("ul",{className:"mb-0",children:[e.jsx("li",{children:a==="ar"?"مفيد للشركات والمؤسسات":"Useful for companies and organizations"}),e.jsx("li",{children:a==="ar"?"يظهر في التقارير والوثائق":"Appears in reports and documents"}),e.jsx("li",{children:a==="ar"?"أبعاد مثلى: 300×100 بكسل":"Optimal dimensions: 300×100 pixels"}),e.jsx("li",{children:a==="ar"?"خلفية شفافة مفضلة":"Transparent background preferred"})]})]})})]}),e.jsxs(D,{className:"mb-3",children:[e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{className:"required",children:a==="ar"?"اسم العميل (عربي)":"Client Name (Arabic)"}),e.jsx(Ie,{value:m.client_name_ar,onChange:j=>S("client_name_ar",j),placeholder:a==="ar"?"أدخل اسم العميل بالعربية":"Enter Arabic client name",disabled:N,isInvalid:!!h.client_name_ar,dir:"rtl"}),h.client_name_ar&&e.jsx(u.Control.Feedback,{type:"invalid",className:"d-block",children:h.client_name_ar})]})}),e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:a==="ar"?"اسم العميل (إنجليزي)":"Client Name (English)"}),e.jsx(Ie,{value:m.client_name_en,onChange:j=>S("client_name_en",j),placeholder:a==="ar"?"أدخل اسم العميل بالإنجليزية":"Enter English client name",disabled:N,dir:"ltr"})]})})]}),e.jsxs(D,{className:"mb-3",children:[e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:a==="ar"?"نوع العميل":"Client Type"}),e.jsxs(u.Select,{value:m.client_type,onChange:j=>S("client_type",j.target.value),disabled:N,children:[e.jsx("option",{value:"individual",children:a==="ar"?"فرد":"Individual"}),e.jsx("option",{value:"company",children:a==="ar"?"شركة":"Company"})]})]})}),e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:a==="ar"?"نوع الخدمة":"Service Type"}),e.jsxs(u.Select,{value:m.cash_pro_bono,onChange:j=>S("cash_pro_bono",j.target.value),disabled:N,children:[e.jsx("option",{value:"cash",children:a==="ar"?"مدفوع":"Paid"}),e.jsx("option",{value:"probono",children:a==="ar"?"مجاني":"Pro Bono"})]})]})}),e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:a==="ar"?"الحالة":"Status"}),e.jsxs(u.Select,{value:m.status,onChange:j=>S("status",j.target.value),disabled:N,children:[e.jsx("option",{value:"active",children:a==="ar"?"نشط":"Active"}),e.jsx("option",{value:"inactive",children:a==="ar"?"غير نشط":"Inactive"}),e.jsx("option",{value:"disabled",children:a==="ar"?"معطل":"Disabled"})]})]})})]}),e.jsx(D,{className:"mb-4 mt-4",children:e.jsx(k,{xs:12,children:e.jsx("h6",{className:"text-muted mb-3",children:a==="ar"?"معلومات الاتصال":"Contact Information"})})}),e.jsxs(D,{className:"mb-3",children:[e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{className:"required",children:[e.jsx(Me,{size:16,className:"me-1"}),a==="ar"?"المحامي المسؤول":"Contact Lawyer"]}),e.jsx(u.Control,{type:"text",value:m.contact_lawyer,onChange:j=>S("contact_lawyer",j.target.value),placeholder:a==="ar"?"اسم المحامي المسؤول":"Contact lawyer name",disabled:N,isInvalid:!!h.contact_lawyer}),h.contact_lawyer&&e.jsx(u.Control.Feedback,{type:"invalid",children:h.contact_lawyer})]})}),e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{children:[e.jsx(Me,{size:16,className:"me-1"}),a==="ar"?"رقم الهاتف":"Phone Number"]}),e.jsx(u.Control,{type:"tel",value:m.phone,onChange:j=>S("phone",j.target.value),placeholder:"+966 xx xxx xxxx",disabled:N,isInvalid:!!h.phone,dir:"ltr"}),h.phone&&e.jsx(u.Control.Feedback,{type:"invalid",children:h.phone})]})}),e.jsx(k,{md:4,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{children:[e.jsx(Es,{size:16,className:"me-1"}),a==="ar"?"البريد الإلكتروني":"Email"]}),e.jsx(u.Control,{type:"email",value:m.email,onChange:j=>S("email",j.target.value),placeholder:"client@example.com",disabled:N,isInvalid:!!h.email,dir:"ltr"}),h.email&&e.jsx(u.Control.Feedback,{type:"invalid",children:h.email})]})})]}),e.jsxs(D,{className:"mb-3",children:[e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{children:[e.jsx(Pe,{size:16,className:"me-1"}),a==="ar"?"العنوان (عربي)":"Address (Arabic)"]}),e.jsx(re,{value:m.address_ar,onChange:j=>S("address_ar",j),placeholder:a==="ar"?"أدخل العنوان بالعربية":"Enter Arabic address",disabled:N,rows:3,dir:"rtl"})]})}),e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{children:[e.jsx(Pe,{size:16,className:"me-1"}),a==="ar"?"العنوان (إنجليزي)":"Address (English)"]}),e.jsx(re,{value:m.address_en,onChange:j=>S("address_en",j),placeholder:a==="ar"?"أدخل العنوان بالإنجليزية":"Enter English address",disabled:N,rows:3,dir:"ltr"})]})})]}),e.jsx(D,{className:"mb-4 mt-4",children:e.jsx(k,{xs:12,children:e.jsx("h6",{className:"text-muted mb-3",children:a==="ar"?"معلومات إضافية":"Additional Information"})})}),e.jsx(D,{className:"mb-3",children:e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsxs(u.Label,{children:[e.jsx(ie,{size:16,className:"me-1"}),a==="ar"?"تاريخ بداية العلاقة":"Start Date"]}),e.jsx(u.Control,{type:"date",value:m.client_start_date,onChange:j=>S("client_start_date",j.target.value),disabled:N,dir:"ltr"})]})})}),e.jsxs(D,{className:"mb-3",children:[e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:a==="ar"?"ملاحظات (عربي)":"Notes (Arabic)"}),e.jsx(re,{value:m.notes_ar,onChange:j=>S("notes_ar",j),placeholder:a==="ar"?"ملاحظات إضافية بالعربية":"Additional notes in Arabic",disabled:N,rows:4,dir:"rtl"})]})}),e.jsx(k,{md:6,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:a==="ar"?"ملاحظات (إنجليزي)":"Notes (English)"}),e.jsx(re,{value:m.notes_en,onChange:j=>S("notes_en",j),placeholder:a==="ar"?"ملاحظات إضافية بالإنجليزية":"Additional notes in English",disabled:N,rows:4,dir:"ltr"})]})})]})]})]}),e.jsxs(R.Footer,{className:"border-top",children:[e.jsxs(E,{variant:"outline-secondary",onClick:s,disabled:w,className:"d-flex align-items-center",children:[e.jsx(Ts,{size:16,className:"me-1"}),a==="ar"?"إلغاء":"Cancel"]}),e.jsxs(E,{variant:N?"primary":"success",type:"submit",disabled:w,className:"d-flex align-items-center",children:[w?e.jsx(G,{size:"sm",animation:"border",className:"me-1"}):e.jsx(Fs,{size:16,className:"me-1"}),V()]})]})]})]})},Ds=()=>{const{t:n}=Z(),{currentLanguage:s}=oe(),[t,c]=d.useState([]),[l,r]=d.useState(!0),[g,a]=d.useState(null),[f,m]=d.useState({status:"",type:"",cash_pro_bono:"",search:""}),[y,h]=d.useState({status:{},type:{},cash_pro_bono:{}}),[p,w]=d.useState({current_page:1,per_page:10,total:0,total_pages:0,has_next:!1,has_prev:!1}),[z,b]=d.useState(!1),[L,F]=d.useState("create"),[N,C]=d.useState(null),[x,i]=d.useState(!1),[v,S]=d.useState(!1),[P,O]=d.useState(null),[H,Y]=d.useState(!1);d.useEffect(()=>{V()},[f.status,f.type,f.cash_pro_bono,f.search,p.current_page]),d.useEffect(()=>{Q()},[]);const V=async()=>{try{r(!0),a(null);const o=new URLSearchParams({page:p.current_page.toString(),limit:p.per_page.toString(),...Object.fromEntries(Object.entries(f).filter(([J,se])=>se))}),_=await T.get(`/clients?${o}`);_.success?(c(_.data.data),w(_.data.pagination)):a("Failed to load clients")}catch(o){a("Error loading clients"),console.error("Error loading clients:",o)}finally{r(!1)}},Q=async()=>{try{const o=await T.get("/clients/options");o.success&&h(o.data)}catch(o){console.error("Error loading options:",o)}},j=(o,_)=>{m(J=>({...J,[o]:_})),w(J=>({...J,current_page:1}))},I=o=>{w(_=>({..._,current_page:o}))},U=()=>{C(null),F("create"),b(!0)},de=async o=>{i(!0);try{const _=await T.get(`/clients/${o.id}`);_.success?(C(_.data),F("edit"),b(!0)):a("Failed to load client details")}catch(_){a("Error loading client details"),console.error("Error loading client:",_)}finally{i(!1)}},he=async o=>{i(!0);try{const _=await T.get(`/clients/${o.id}`);_.success?(C(_.data),F("view"),b(!0)):a("Failed to load client details")}catch(_){a("Error loading client details"),console.error("Error loading client:",_)}finally{i(!1)}},ee=async o=>{try{let _;if(L==="create"?_=await T.post("/clients",o):_=await T.put(`/clients/${N==null?void 0:N.id}`,o),_.success)await V(),b(!1);else throw new Error(_.message||"Failed to save client")}catch(_){throw console.error("Error saving client:",_),_}},q=o=>{O(o),S(!0)},He=async()=>{if(P)try{Y(!0),(await T.delete(`/clients/${P.id}`)).success?(await V(),S(!1),O(null)):a("Failed to delete client")}catch(o){a("Error deleting client"),console.error("Error deleting client:",o)}finally{Y(!1)}},Je=()=>{b(!1),C(null),i(!1)},we=()=>{S(!1),O(null),Y(!1)},Ze=o=>{const _={active:"success",disabled:"danger",inactive:"secondary"};return e.jsx(B,{bg:_[o]||"secondary",children:y.status[o]||o})},Ce=o=>o==="company"?e.jsx(qe,{size:16}):e.jsx(Be,{size:16}),Ve=o=>{const _={cash:"success",probono:"info"};return e.jsx(B,{bg:_[o]||"secondary",children:y.cash_pro_bono[o]||o})},ke=o=>o?new Date(o).toLocaleDateString("ar-SA"):"-";return l&&t.length===0?e.jsx($,{className:"py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2",children:"Loading clients..."})]})}):e.jsxs($,{fluid:!0,className:"py-4",children:[e.jsx(D,{className:"mb-4",children:e.jsx(k,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-1",children:[e.jsx(ce,{className:"me-2"}),"إدارة العملاء"]}),e.jsx("p",{className:"text-muted mb-0",children:"إدارة وتتبع جميع العملاء والشركات"})]}),e.jsxs(E,{variant:"primary",size:"lg",onClick:U,children:[e.jsx(ve,{className:"me-2"}),"إضافة عميل جديد"]})]})})}),e.jsx(M,{className:"mb-4",children:e.jsx(M.Body,{children:e.jsxs(D,{children:[e.jsx(k,{md:3,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"البحث"}),e.jsxs(K,{children:[e.jsx(K.Text,{children:e.jsx(Ne,{size:16})}),e.jsx(u.Control,{type:"text",placeholder:"البحث في العملاء...",value:f.search,onChange:o=>j("search",o.target.value)})]})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"الحالة"}),e.jsxs(u.Select,{value:f.status,onChange:o=>j("status",o.target.value),children:[e.jsx("option",{value:"",children:"جميع الحالات"}),Object.entries(y.status).map(([o,_])=>e.jsx("option",{value:o,children:_},o))]})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"النوع"}),e.jsxs(u.Select,{value:f.type,onChange:o=>j("type",o.target.value),children:[e.jsx("option",{value:"",children:"جميع الأنواع"}),Object.entries(y.type).map(([o,_])=>e.jsx("option",{value:o,children:_},o))]})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"نوع الدفع"}),e.jsxs(u.Select,{value:f.cash_pro_bono,onChange:o=>j("cash_pro_bono",o.target.value),children:[e.jsx("option",{value:"",children:"جميع الأنواع"}),Object.entries(y.cash_pro_bono).map(([o,_])=>e.jsx("option",{value:o,children:_},o))]})]})}),e.jsx(k,{md:2,className:"d-flex align-items-end",children:e.jsxs(E,{variant:"outline-secondary",onClick:V,children:[e.jsx(ye,{className:"me-1"}),"تطبيق"]})})]})})}),g&&e.jsx(pe,{variant:"danger",className:"mb-4",children:g}),e.jsxs(M,{children:[e.jsx(M.Header,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"قائمة العملاء"}),e.jsxs("div",{className:"text-muted",children:["إجمالي: ",p.total," عميل"]})]})}),e.jsx(M.Body,{className:"p-0",children:l?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2",children:"جاري التحميل..."})]}):t.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(ce,{size:48,className:"text-muted mb-3"}),e.jsx("h5",{children:"لا يوجد عملاء"}),e.jsx("p",{className:"text-muted",children:"لم يتم العثور على عملاء يطابقون المعايير المحددة"})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"الاسم"}),e.jsx("th",{children:"النوع"}),e.jsx("th",{children:"الحالة"}),e.jsx("th",{children:"نوع الدفع"}),e.jsx("th",{children:"المحامي المسؤول"}),e.jsx("th",{children:"عدد القضايا"}),e.jsx("th",{children:"تاريخ البداية"}),e.jsx("th",{children:"آخر قضية"}),e.jsx("th",{children:"الإجراءات"})]})}),e.jsx("tbody",{children:t.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"me-2",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.logo_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:o.logo_url,alt:`${o.client_name_ar} Logo`,style:{width:"32px",height:"32px",objectFit:"contain",borderRadius:"4px",border:"1px solid #dee2e6"},onError:_=>{const J=_.currentTarget,se=J.parentElement;if(se){J.style.display="none";const Se=se.querySelector(".fallback-icon");Se&&(Se.style.display="block")}}}),e.jsx("div",{className:"fallback-icon",style:{display:"none"},children:Ce(o.client_type)})]}):e.jsx("div",{className:"type-icon",children:Ce(o.client_type)})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-bold",children:o.client_name_ar}),o.client_name_en&&e.jsx("small",{className:"text-muted",children:o.client_name_en}),o.logo_url&&e.jsx("div",{children:e.jsxs("small",{className:"text-success",children:[e.jsx(Ge,{size:12,className:"me-1"}),s==="ar"?"يحتوي على شعار":"Has Logo"]})})]})]})}),e.jsx("td",{children:e.jsx(B,{bg:"info",children:y.type[o.client_type]||o.client_type})}),e.jsx("td",{children:Ze(o.status)}),e.jsx("td",{children:Ve(o.cash_pro_bono)}),e.jsx("td",{children:o.contact_lawyer||"-"}),e.jsx("td",{children:e.jsx(B,{bg:"primary",children:o.cases_count})}),e.jsx("td",{children:ke(o.client_start_date)}),e.jsx("td",{children:ke(o.last_case_date)}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(E,{variant:"outline-primary",size:"sm",onClick:()=>he(o),title:s==="ar"?"عرض التفاصيل":"View Details",children:e.jsx(fe,{size:14})}),e.jsx(E,{variant:"outline-secondary",size:"sm",onClick:()=>de(o),title:s==="ar"?"تعديل":"Edit",children:e.jsx(be,{size:14})}),e.jsx(E,{variant:"outline-danger",size:"sm",onClick:()=>q(o),title:s==="ar"?"حذف":"Delete",children:e.jsx(le,{size:14})})]})})]},o.id))})]})})}),p.total_pages>1&&e.jsx(M.Footer,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted",children:["عرض ",(p.current_page-1)*p.per_page+1," إلى"," ",Math.min(p.current_page*p.per_page,p.total)," من"," ",p.total," عميل"]}),e.jsxs("div",{className:"btn-group",children:[e.jsx(E,{variant:"outline-secondary",size:"sm",disabled:!p.has_prev,onClick:()=>I(p.current_page-1),children:"السابق"}),Array.from({length:p.total_pages},(o,_)=>_+1).map(o=>e.jsx(E,{variant:o===p.current_page?"primary":"outline-secondary",size:"sm",onClick:()=>I(o),children:o},o)),e.jsx(E,{variant:"outline-secondary",size:"sm",disabled:!p.has_next,onClick:()=>I(p.current_page+1),children:"التالي"})]})]})})]}),e.jsx(Is,{show:z,onHide:Je,onSave:ee,client:N,mode:L,loading:x}),e.jsxs(R,{show:v,onHide:we,centered:!0,size:"sm",children:[e.jsx(R.Header,{closeButton:!0,children:e.jsxs(R.Title,{className:"d-flex align-items-center text-danger",children:[e.jsx(Cs,{className:"me-2",size:20}),s==="ar"?"تأكيد الحذف":"Confirm Delete"]})}),e.jsxs(R.Body,{children:[e.jsx("p",{className:"mb-3",children:s==="ar"?"هل أنت متأكد من حذف هذا العميل؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this client? This action cannot be undone."}),P&&e.jsxs("div",{className:"bg-light p-3 rounded",children:[e.jsx("strong",{children:s==="ar"?P.client_name_ar:P.client_name_en||P.client_name_ar}),e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:[s==="ar"?"عدد القضايا:":"Cases:"," ",P.cases_count]})]})]}),e.jsxs(R.Footer,{children:[e.jsx(E,{variant:"outline-secondary",onClick:we,disabled:H,children:s==="ar"?"إلغاء":"Cancel"}),e.jsx(E,{variant:"danger",onClick:He,disabled:H,className:"d-flex align-items-center",children:H?e.jsxs(e.Fragment,{children:[e.jsx(G,{size:"sm",animation:"border",className:"me-1"}),s==="ar"?"جاري الحذف...":"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:16,className:"me-1"}),s==="ar"?"حذف":"Delete"]})})]})]})]})},Os=()=>{const{t:n}=Z(),[s,t]=d.useState([]),[c,l]=d.useState(!0),[r,g]=d.useState(null),[a,f]=d.useState({case_id:"",hearing_result:"",hearing_type:"",date_from:"",date_to:"",search:""}),[m,y]=d.useState({result:{},type:{},duration:{}}),[h,p]=d.useState({current_page:1,per_page:10,total:0,total_pages:0,has_next:!1,has_prev:!1});d.useEffect(()=>{w(),z()},[a,h.current_page]);const w=async()=>{try{l(!0),g(null);const i=new URLSearchParams({page:h.current_page.toString(),limit:h.per_page.toString(),...Object.fromEntries(Object.entries(a).filter(([S,P])=>P))}),v=await T.get(`/hearings?${i}`);v.success?(t(v.data.data),p(v.data.pagination)):g("Failed to load hearings")}catch(i){g("Error loading hearings"),console.error("Error loading hearings:",i)}finally{l(!1)}},z=async()=>{try{const i=await T.get("/hearings/options");i.success&&y(i.data)}catch(i){console.error("Error loading options:",i)}},b=(i,v)=>{f(S=>({...S,[i]:v})),p(S=>({...S,current_page:1}))},L=i=>{p(v=>({...v,current_page:i}))},F=i=>{const v={won:"success",lost:"danger",postponed:"warning",pending:"info"};return e.jsx(B,{bg:v[i]||"secondary",children:m.result[i]||i})},N=i=>{const v={initial:"primary",procedural:"info",evidence:"warning",witness:"success",expert:"secondary",final:"dark",appeal:"danger",execution:"light"};return e.jsx(B,{bg:v[i]||"secondary",children:m.type[i]||i})},C=i=>i?new Date(i).toLocaleDateString("ar-SA"):"-",x=i=>m.duration[i]||i;return c&&s.length===0?e.jsx($,{className:"py-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2",children:"Loading hearings..."})]})}):e.jsxs($,{fluid:!0,className:"py-4",children:[e.jsx(D,{className:"mb-4",children:e.jsx(k,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-1",children:[e.jsx(X,{className:"me-2"}),"إدارة الجلسات"]}),e.jsx("p",{className:"text-muted mb-0",children:"إدارة وتتبع جميع جلسات المحكمة"})]}),e.jsxs(E,{variant:"primary",size:"lg",children:[e.jsx(ve,{className:"me-2"}),"إضافة جلسة جديدة"]})]})})}),e.jsx(M,{className:"mb-4",children:e.jsx(M.Body,{children:e.jsxs(D,{children:[e.jsx(k,{md:3,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"البحث"}),e.jsxs(K,{children:[e.jsx(K.Text,{children:e.jsx(Ne,{size:16})}),e.jsx(u.Control,{type:"text",placeholder:"البحث في الجلسات...",value:a.search,onChange:i=>b("search",i.target.value)})]})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"النتيجة"}),e.jsxs(u.Select,{value:a.hearing_result,onChange:i=>b("hearing_result",i.target.value),children:[e.jsx("option",{value:"",children:"جميع النتائج"}),Object.entries(m.result).map(([i,v])=>e.jsx("option",{value:i,children:v},i))]})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"نوع الجلسة"}),e.jsxs(u.Select,{value:a.hearing_type,onChange:i=>b("hearing_type",i.target.value),children:[e.jsx("option",{value:"",children:"جميع الأنواع"}),Object.entries(m.type).map(([i,v])=>e.jsx("option",{value:i,children:v},i))]})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"من تاريخ"}),e.jsx(u.Control,{type:"date",value:a.date_from,onChange:i=>b("date_from",i.target.value)})]})}),e.jsx(k,{md:2,children:e.jsxs(u.Group,{children:[e.jsx(u.Label,{children:"إلى تاريخ"}),e.jsx(u.Control,{type:"date",value:a.date_to,onChange:i=>b("date_to",i.target.value)})]})}),e.jsx(k,{md:1,className:"d-flex align-items-end",children:e.jsxs(E,{variant:"outline-secondary",onClick:w,children:[e.jsx(ye,{className:"me-1"}),"تطبيق"]})})]})})}),r&&e.jsx(pe,{variant:"danger",className:"mb-4",children:r}),e.jsxs(M,{children:[e.jsx(M.Header,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"قائمة الجلسات"}),e.jsxs("div",{className:"text-muted",children:["إجمالي: ",h.total," جلسة"]})]})}),e.jsx(M.Body,{className:"p-0",children:c?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(G,{animation:"border"}),e.jsx("p",{className:"mt-2",children:"جاري التحميل..."})]}):s.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(X,{size:48,className:"text-muted mb-3"}),e.jsx("h5",{children:"لا توجد جلسات"}),e.jsx("p",{className:"text-muted",children:"لم يتم العثور على جلسات تطابق المعايير المحددة"})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"تاريخ الجلسة"}),e.jsx("th",{children:"القضية"}),e.jsx("th",{children:"العميل"}),e.jsx("th",{children:"نوع الجلسة"}),e.jsx("th",{children:"النتيجة"}),e.jsx("th",{children:"المدة"}),e.jsx("th",{children:"القرار"}),e.jsx("th",{children:"الجلسة التالية"}),e.jsx("th",{children:"الإجراءات"})]})}),e.jsx("tbody",{children:s.map(i=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ie,{className:"me-2",size:16}),C(i.hearing_date)]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:i.matter_id||"-"}),e.jsx("div",{className:"text-muted small",children:i.matter_ar||"-"})]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{children:i.client_name_ar||"-"}),i.client_name_en&&e.jsx("small",{className:"text-muted",children:i.client_name_en})]})}),e.jsx("td",{children:N(i.hearing_type)}),e.jsx("td",{children:F(i.hearing_result)}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ks,{className:"me-1",size:14}),x(i.hearing_duration)]})}),e.jsx("td",{children:e.jsx("div",{className:"text-truncate",style:{maxWidth:"200px"},children:i.hearing_decision||i.short_decision||"-"})}),e.jsx("td",{children:i.next_hearing?e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ie,{className:"me-1",size:14}),C(i.next_hearing)]}):"-"}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(E,{variant:"outline-primary",size:"sm",children:e.jsx(fe,{size:14})}),e.jsx(E,{variant:"outline-secondary",size:"sm",children:e.jsx(be,{size:14})}),e.jsx(E,{variant:"outline-danger",size:"sm",children:e.jsx(le,{size:14})})]})})]},i.id))})]})})}),h.total_pages>1&&e.jsx(M.Footer,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted",children:["عرض ",(h.current_page-1)*h.per_page+1," إلى"," ",Math.min(h.current_page*h.per_page,h.total)," من"," ",h.total," جلسة"]}),e.jsxs("div",{className:"btn-group",children:[e.jsx(E,{variant:"outline-secondary",size:"sm",disabled:!h.has_prev,onClick:()=>L(h.current_page-1),children:"السابق"}),Array.from({length:h.total_pages},(i,v)=>v+1).map(i=>e.jsx(E,{variant:i===h.current_page?"primary":"outline-secondary",size:"sm",onClick:()=>L(i),children:i},i)),e.jsx(E,{variant:"outline-secondary",size:"sm",disabled:!h.has_next,onClick:()=>L(h.current_page+1),children:"التالي"})]})]})})]})]})},Rs=()=>{const{isAuthenticated:n,isLoading:s,user:t,logout:c}=je(),[l,r]=d.useState("dashboard");if(s)return e.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-3",children:"جاري التحميل..."})]})});if(!n)return e.jsx(is,{});const g=()=>{switch(l){case"cases":return e.jsx(Ps,{});case"clients":return e.jsx(Ds,{});case"hearings":return e.jsx(Os,{});default:return e.jsx(cs,{})}};return e.jsxs("div",{className:"app",dir:"rtl",children:[e.jsx(ae,{bg:"dark",variant:"dark",expand:"lg",className:"mb-4",children:e.jsxs($,{fluid:!0,children:[e.jsxs(ae.Brand,{href:"#",onClick:a=>{a.preventDefault(),r("dashboard")},children:[e.jsx(X,{className:"me-2"}),"نظام إدارة التقاضي"]}),e.jsx(ae.Toggle,{"aria-controls":"basic-navbar-nav"}),e.jsxs(ae.Collapse,{id:"basic-navbar-nav",children:[e.jsxs(W,{className:"me-auto",children:[e.jsxs(W.Link,{href:"#",onClick:a=>{a.preventDefault(),r("dashboard")},className:l==="dashboard"?"active":"",children:[e.jsx(Ss,{className:"me-1",size:16}),"الرئيسية"]}),e.jsxs(W.Link,{href:"#",onClick:a=>{a.preventDefault(),r("cases")},className:l==="cases"?"active":"",children:[e.jsx(X,{className:"me-1",size:16}),"القضايا"]}),e.jsxs(W.Link,{href:"#",onClick:a=>{a.preventDefault(),r("clients")},className:l==="clients"?"active":"",children:[e.jsx(ce,{className:"me-1",size:16}),"العملاء"]}),e.jsxs(W.Link,{href:"#",onClick:a=>{a.preventDefault(),r("hearings")},className:l==="hearings"?"active":"",children:[e.jsx(ie,{className:"me-1",size:16}),"الجلسات"]})]}),e.jsx(W,{children:e.jsx(Le,{title:e.jsxs("span",{children:[e.jsx(ce,{className:"me-1",size:16}),(t==null?void 0:t.name)||"المستخدم"]}),id:"user-dropdown",children:e.jsxs(Le.Item,{href:"#",onClick:a=>{a.preventDefault(),c()},children:[e.jsx(Ls,{className:"me-1",size:16}),"تسجيل الخروج"]})})})]})]})}),e.jsx($,{fluid:!0,children:g()})]})},Us=()=>e.jsx(as,{children:e.jsx(Rs,{})});me.createRoot(document.getElementById("root")).render(e.jsx(Qe.StrictMode,{children:e.jsx(Us,{})}));
//# sourceMappingURL=index-gr823RvA.js.map
